{"remainingRequest":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\node_modules\\babel-loader\\lib\\index.js!G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\node_modules\\eslint-loader\\index.js??ref--14-0!G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\src\\services\\auth.service.js","dependencies":[{"path":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\src\\services\\auth.service.js","mtime":1637248916000},{"path":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\babel.config.js","mtime":1637248916000},{"path":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\VueAllprojects\\practicevue\\copyvrent6\\vlogin2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJHOi9WdWVBbGxwcm9qZWN0cy9wcmFjdGljZXZ1ZS9jb3B5dnJlbnQ2L3Zsb2dpbjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJHOi9WdWVBbGxwcm9qZWN0cy9wcmFjdGljZXZ1ZS9jb3B5dnJlbnQ2L3Zsb2dpbjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKdmFyIEFQSV9VUkwgPSAnIGh0dHBzOi8vdnJlbnQudGVjaHZpbGwub3JnL3ZyZW50YXBpL2FwaS8nOwoKdmFyIEF1dGhTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU2VydmljZSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aFNlcnZpY2UsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4odXNlcikgewogICAgICByZXR1cm4gYXhpb3MucG9zdChBUElfVVJMICsgJ2xvZ2luJywgewogICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4odGhpcy5oYW5kbGVSZXNwb25zZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLnRva2VuKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuZGF0YSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXIpIHsKICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoQVBJX1VSTCArICdyZWdpc3RlcicsIHsKICAgICAgICBmaXJzdF9uYW1lOiB1c2VyLmZpcnN0X25hbWUsCiAgICAgICAgbGFzdF9uYW1lOiB1c2VyLmxhc3RfbmFtZSwKICAgICAgICBiaXJ0aGRheV9tb250aDogdXNlci5iaXJ0aGRheV9tb250aCwKICAgICAgICBiaXJ0aGRheV9kYXk6IHVzZXIuYmlydGhkYXlfZGF5LAogICAgICAgIGJpcnRoZGF5X3llYXI6IHVzZXIuYmlydGhkYXlfeWVhciwKICAgICAgICBlbWFpbDogdXNlci5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVSZXNwb25zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7CiAgICAgICAgdmFyIGVycm9yID0gcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXV0aFNlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBBdXRoU2VydmljZSgpOw=="},{"version":3,"sources":["G:/VueAllprojects/practicevue/copyvrent6/vlogin2/src/services/auth.service.js"],"names":["axios","API_URL","AuthService","user","post","email","password","then","handleResponse","response","data","token","localStorage","setItem","JSON","stringify","removeItem","first_name","last_name","birthday_month","birthday_day","birthday_year","status","logout","location","reload","error","message","Promise","reject","resolve"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAG,2CAAhB;;IAEMC,W;;;;;;;WACF,eAAMC,IAAN,EAAY;AACR,aAAOH,KAAK,CACPI,IADE,CACGH,OAAO,GAAG,OADb,EACsB;AACrBI,QAAAA,KAAK,EAAEF,IAAI,CAACE,KADS;AAErBC,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAFM,OADtB,EAKFC,IALE,CAKG,KAAKC,cALR,EAMFD,IANE,CAMG,UAAAE,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,KAAvB,EAA8B;AAC1BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcA,IAA7B,CAA7B;AACH;;AAED,eAAOD,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACH,OAZE,CAAP;AAaH;;;WAED,kBAAS;AACLE,MAAAA,YAAY,CAACI,UAAb,CAAwB,MAAxB;AACH;;;WAED,kBAASb,IAAT,EAAe;AACX,aAAOH,KAAK,CAACI,IAAN,CAAWH,OAAO,GAAG,UAArB,EAAiC;AACpCgB,QAAAA,UAAU,EAAEd,IAAI,CAACc,UADmB;AAEpCC,QAAAA,SAAS,EAAEf,IAAI,CAACe,SAFoB;AAGpCC,QAAAA,cAAc,EAAEhB,IAAI,CAACgB,cAHe;AAIpCC,QAAAA,YAAY,EAAEjB,IAAI,CAACiB,YAJiB;AAKpCC,QAAAA,aAAa,EAAElB,IAAI,CAACkB,aALgB;AAMpChB,QAAAA,KAAK,EAAEF,IAAI,CAACE,KANwB;AAOpCC,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAPqB,OAAjC,CAAP;AASH;;;WAED,wBAAeG,QAAf,EAAyB;AACrB,UAAIA,QAAQ,CAACa,MAAT,KAAoB,GAAxB,EAA6B;AACzB,aAAKC,MAAL;AACAC,QAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AAEA,YAAMC,KAAK,GAAGjB,QAAQ,CAACC,IAAT,IAAiBD,QAAQ,CAACC,IAAT,CAAciB,OAA7C;AACA,eAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH;;AAED,aAAOE,OAAO,CAACE,OAAR,CAAgBrB,QAAhB,CAAP;AACH;;;;;;AAGL,eAAe,IAAIP,WAAJ,EAAf","sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = ' https://vrent.techvill.org/vrentapi/api/';\r\n\r\nclass AuthService {\r\n    login(user) {\r\n        return axios\r\n            .post(API_URL + 'login', {\r\n                email: user.email,\r\n                password: user.password\r\n            })\r\n            .then(this.handleResponse)\r\n            .then(response => {\r\n                if (response.data.data.token) {\r\n                    localStorage.setItem('user', JSON.stringify(response.data.data));\r\n                }\r\n\r\n                return response.data.data;\r\n            });\r\n    }\r\n\r\n    logout() {\r\n        localStorage.removeItem('user');\r\n    }\r\n\r\n    register(user) {\r\n        return axios.post(API_URL + 'register', {\r\n            first_name: user.first_name,\r\n            last_name: user.last_name,\r\n            birthday_month: user.birthday_month,\r\n            birthday_day: user.birthday_day,\r\n            birthday_year: user.birthday_year,\r\n            email: user.email,\r\n            password: user.password\r\n        });\r\n    }\r\n\r\n    handleResponse(response) {\r\n        if (response.status === 401) {\r\n            this.logout();\r\n            location.reload(true);\r\n\r\n            const error = response.data && response.data.message;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        return Promise.resolve(response);\r\n    }\r\n}\r\n\r\nexport default new AuthService();"]}]}